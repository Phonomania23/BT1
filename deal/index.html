<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–°–¥–µ–ª–∫–∞ ‚Äî Bloggers.tools</title>

  <!-- –°—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="../css/base.css?v=20250901" />
  <link rel="stylesheet" href="../css/layout.css?v=20250901" />
  <link rel="stylesheet" href="../css/deal.css?v=20250901" />
  <!-- –ò–∫–æ–Ω–∫–∏ –∫–∞–∫ –≤ agency.html -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- –°—Ç–∏–ª–∏ –∫–∞—Ä—Ç–æ—á–µ–∫/—Ñ–∏–ª—å—Ç—Ä–æ–≤: –∏–¥–µ–Ω—Ç–∏—á–Ω—ã agency.html -->
  <style>
    .filterbar {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin: 16px 0;
      padding: 16px;
      background: var(--surface-2);
      border-radius: 12px;
      border: 1px solid var(--surface-border);
      align-items: flex-start;
    }

    .filter-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      padding: 12px;
      background: var(--surface-2);
      border-radius: 8px;
      border: 1px solid var(--surface-border);
      margin-bottom: 12px;
      width: 100%;
    }
    .filter-group-title {
      width: 100%;
      margin: 0 0 8px 0;
      font-weight: 600;
      color: var(--text);
      font-size: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .filter-group-title i { color: var(--primary); }

    .chip {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      background: var(--surface-2);
      border: 1px solid var(--surface-border);
      border-radius: 20px;
    }
    .chip label {
      font-weight: 600;
      font-size: 14px;
      color: var(--text);
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* –∏–Ω–ø—É—Ç—ã/—Å–µ–ª–µ–∫—Ç—ã, –∫—Ä–æ–º–µ —á–µ–∫–±–æ–∫—Å–∞ */
    .chip input[type="text"],
    .chip input[type="number"],
    .chip input[type="search"],
    .chip select {
      border: 1px solid var(--surface-border);
      border-radius: 6px;
      padding: 6px 8px;
      font-size: 14px;
      background: var(--surface);
      color: var(--text);
    }
    .chip input[type="text"]:focus,
    .chip input[type="number"]:focus,
    .chip input[type="search"]:focus,
    .chip select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: var(--focus);
      background: var(--surface-3);
    }

    /* –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —á–µ–∫–±–æ–∫—Å ¬´–¢–æ–ª—å–∫–æ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ¬ª ‚Äî –±–µ–∑ –±–æ–ª—å—à–æ–≥–æ –æ–±–æ–¥–∫–∞ */
    .chip input[type="checkbox"]{
      appearance: none;
      width: 16px;
      height: 16px;
      border: 1px solid var(--surface-border);
      border-radius: 4px;
      background: var(--surface);
      display: inline-grid;
      place-items: center;
      padding: 0;
      margin: 0;
    }
    .chip input[type="checkbox"]:checked{
      background: var(--primary);
      border-color: var(--primary);
    }
    .chip input[type="checkbox"]:checked::after{
      content:"";
      width:9px;height:9px;
      mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path fill="black" d="M4.5 9.2 1.8 6.5l.9-.9 1.8 1.8 4-4 .9.9-4.9 4.9Z"/></svg>') no-repeat center/contain;
      background:#000;
      display:block;
    }

    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 12px 0;
      padding: 12px;
      background: var(--surface-2);
      border-radius: 8px;
      border: 1px solid var(--surface-border);
    }
    .chip-filter {
      display: inline-flex;
      align-items: center;
      background: var(--surface-2);
      border: 1px solid var(--surface-border);
      padding: 6px 12px;
      border-radius: 16px;
      margin: 4px;
      font-size: 14px;
    }
    .chip-filter button {
      background: none;
      border: none;
      margin-left: 6px;
      cursor: pointer;
      color: var(--text-muted);
    }

    .cards-list { list-style: none; padding: 0; margin: 0; display: grid; gap: 12px; }
    .card-blogger {
      background: var(--surface);
      border: 1px solid var(--surface-border);
      border-radius: 12px;
      padding: 16px;
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 12px;
      align-items: start;
      transition: var(--transition);
    }
    .card-blogger:hover { border-color: var(--primary); box-shadow: var(--shadow-1); }

    .card-blogger .avatar {
      width: 48px; height: 48px; border-radius: 50%;
      background: var(--surface-2);
      display: flex; align-items: center; justify-content: center;
      font-weight: bold; color: var(--text-muted); position: relative;
    }
    .platform-badge {
      position: absolute; bottom: -4px; right: -4px;
      width: 20px; height: 20px; border-radius: 50%;
      background: var(--surface); border: 2px solid var(--surface);
      display: flex; align-items: center; justify-content: center;
      font-size: 10px; color: var(--text);
    }
    .card-blogger .name {
      font-weight: 700; font-size: 16px; color: var(--text);
      margin-bottom: 4px; display: flex; align-items: center; gap: 8px;
    }
    .verification-badge { color: var(--primary); font-size: 14px; }
    .card-blogger .meta { color: var(--text-muted); font-size: 14px; margin-bottom: 4px; line-height: 1.4; }
    .card-blogger .badge {
      display: inline-block; padding: 2px 8px; background: var(--surface-2);
      color: var(--text); border-radius: 12px; font-size: 12px; font-weight: 500;
      margin-right: 6px; margin-bottom: 4px;
    }
    .badge.highlight { background: var(--primary); color: var(--primary-ink); }
    .card-blogger .stats { display: flex; gap: 12px; margin: 8px 0; flex-wrap: wrap; }
    .stat-item { display: flex; align-items: center; gap: 4px; font-size: 13px; color: var(--text-muted); }
    .stat-item i { color: var(--primary); }
    .select-radio { display: flex; align-items: center; gap: 6px; font-size: 14px; cursor: pointer; color: var(--text); }
    .card-blogger.selected { background-color: rgba(199, 255, 26, 0.08); border-color: var(--primary); }

    .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .muted{color:var(--text-muted)}

    /* –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ —Å–∞–º—ã–π –Ω–∏–∑, –∫–∞–∫ –≤ agency.html) */
    .sort-options {
      display: flex;
      gap: 8px;
      align-items: center;
      margin: 10px 0 0 0;
      width: 100%;
    }
    .sort-label { font-weight: 600; font-size: 14px; color: var(--text); }
    .sort-buttons { display: flex; gap: 4px; flex-wrap: wrap; }
    .sort-btn {
      padding: 6px 12px; background: var(--surface-2); border: 1px solid var(--surface-border);
      border-radius: 6px; font-size: 13px; cursor: pointer; transition: var(--transition); color: var(--text);
    }
    .sort-btn:hover { background: var(--surface-3); }
    .sort-btn.active { background: var(--primary); color: var(--primary-ink); border-color: var(--primary); }

    .blogger-card-link {
      color: var(--primary); text-decoration: none; font-size: 14px;
      display: inline-flex; align-items: center; gap: 4px; margin-left: auto;
    }
    .blogger-card-link:hover { text-decoration: underline; }

    .count { font-variant-numeric: tabular-nums; font-weight: 700; color: var(--primary); }

    /* –≤—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é –ö–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∫–∞–∫ –≤ agency.html */
    .contacts-dropdown { position: relative; display: inline-block; }
    .contacts-dropdown-content{
      display:none; position:absolute; right:0; background:var(--surface); min-width:160px;
      box-shadow:var(--shadow-1); z-index:10; border-radius:8px; padding:12px; border:1px solid var(--surface-border);
    }
    .contacts-dropdown-content a{ color:var(--text); padding:8px 12px; text-decoration:none; display:block; border-radius:4px; font-size:14px;}
    .contacts-dropdown-content a:hover{ background:var(--surface-3); }
    .contacts-dropdown:hover .contacts-dropdown-content{ display:block; }
  </style>

  <!-- –°–∫—Ä–∏–ø—Ç—ã (–í–ê–ñ–ï–ù –ü–û–†–Ø–î–û–ö) -->
  <script defer src="../js/include.js?v=6"></script>
  <script defer src="../js/notify.js?v=1"></script>
  <script defer src="../js/messenger.js?v=1"></script>
  <script defer src="../js/message-templates.js?v=1"></script>
  <script defer src="../js/ai-brief.js?v=1"></script>

  <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —à–∞–≥–∞ ¬´–ü–æ–¥–±–æ—Ä¬ª —Å–æ —Å—Ç—Ä–æ–≥–æ —Ç–æ–π –∂–µ —Å–∏—Å—Ç–µ–º–æ–π —Ñ–∏–ª—å—Ç—Ä–æ–≤, —á—Ç–æ –∏ –≤ agency.html -->
  <script defer>
    // –≠—Ç–æ—Ç init –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ä–æ—É—Ç–µ—Ä–æ–º –Ω–∞ —à–∞–≥–µ 1
    window.initPickStep = function(){
      // –°–æ—Å—Ç–æ—è–Ω–∏–µ (–∫–∞–∫ –≤ agency.html)
      const appState = {
        selectedBloggers: JSON.parse(localStorage.getItem('selectedBloggers')||'[]'),
        currentSort: 'relevance',
        // –ú–æ–∫–∏ (1:1 —Å agency.html)
        mockBloggers: [
          { 
            id: 1, name: "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤", username: "tech_review", platform: "YouTube", 
            followers: 125000, avg_views: 45000, er: 4.5, price: 2500,
            blogger_gender: "male", blogger_age: "28", blogger_country: "–†–æ—Å—Å–∏—è", blogger_language: "–†—É—Å—Å–∫–∏–π",
            audience_gender: "male", audience_age: "25-34", audience_country: "–†–æ—Å—Å–∏—è", audience_language: "–†—É—Å—Å–∫–∏–π",
            growth: "growing", last_post: "2023-10-20", has_email: true, has_phone: false, has_telegram: true, has_whatsapp: false,
            verified: true, bio: "–û–±–∑–æ—Ä—ã —Ç–µ—Ö–Ω–∏–∫–∏ –∏ –≥–∞–¥–∂–µ—Ç–æ–≤ | Tech reviewer | unboxing"
          },
          { 
            id: 2, name: "–ê–Ω–Ω–∞ –°–∏–¥–æ—Ä–æ–≤–∞", username: "anna_beauty", platform: "Instagram", 
            followers: 87000, avg_views: 25000, er: 7.2, price: 1800,
            blogger_gender: "female", blogger_age: "22", blogger_country: "–†–æ—Å—Å–∏—è", blogger_language: "–†—É—Å—Å–∫–∏–π",
            audience_gender: "female", audience_age: "18-24", audience_country: "–†–æ—Å—Å–∏—è", audience_language: "–†—É—Å—Å–∫–∏–π",
            growth: "stable", last_post: "2023-10-22", has_email: true, has_phone: true, has_telegram: false, has_whatsapp: true,
            verified: false, bio: "üíÑ –ö–æ—Å–º–µ—Ç–∏–∫–∞ –∏ —É—Ö–æ–¥ | Beauty blogger | makeup tutorials"
          },
          { 
            id: 3, name: "–°–µ—Ä–≥–µ–π –ö–æ–∑–ª–æ–≤", username: "game_master", platform: "YouTube", 
            followers: 356000, avg_views: 89000, er: 3.8, price: 4200,
            blogger_gender: "male", blogger_age: "25", blogger_country: "–°–®–ê", blogger_language: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π",
            audience_gender: "male", audience_age: "13-17", audience_country: "–°–®–ê", audience_language: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π",
            growth: "growing", last_post: "2023-10-15", has_email: false, has_phone: false, has_telegram: true, has_whatsapp: false,
            verified: true, bio: "Gaming channel | Live streams | Game reviews"
          },
          { 
            id: 4, name: "–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞", username: "fashion_maria", platform: "Instagram", 
            followers: 210000, avg_views: 65000, er: 8.1, price: 1900,
            blogger_gender: "female", blogger_age: "21", blogger_country: "–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è", blogger_language: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π",
            audience_gender: "female", audience_age: "18-24", audience_country: "–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è", audience_language: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π",
            growth: "growing", last_post: "2023-10-23", has_email: true, has_phone: true, has_telegram: true, has_whatsapp: true,
            verified: true, bio: "Fashion & lifestyle | Outfit ideas | London based"
          },
          { 
            id: 5, name: "–î–º–∏—Ç—Ä–∏–π –°–º–∏—Ä–Ω–æ–≤", username: "news_dima", platform: "YouTube", 
            followers: 45000, avg_views: 12000, er: 5.5, price: 1200,
            blogger_gender: "male", blogger_age: "40", blogger_country: "–†–æ—Å—Å–∏—è", blogger_language: "–†—É—Å—Å–∫–∏–π",
            audience_gender: "mixed", audience_age: "35-44", audience_country: "–†–æ—Å—Å–∏—è", audience_language: "–†—É—Å—Å–∫–∏–π",
            growth: "stable", last_post: "2023-10-23", has_email: true, has_phone: false, has_telegram: false, has_whatsapp: false,
            verified: false, bio: "–ù–æ–≤–æ—Å—Ç–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ | –ü–æ–ª–∏—Ç–∏–∫–∞ –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∞"
          }
        ]
      };

      const $ = (sel) => document.querySelector(sel);

      setupEventListeners();
      renderBloggersList();
      updateSelectionCount();
      updateActiveChips();

      function setupEventListeners() {
        // –§–∏–ª—å—Ç—Ä—ã
        const filterIds = [
          'fPlatform', 'followersMin', 'followersMax', 'fFollowersUnit',
          'fAvgViewsMin', 'fErMin', 'fErMax', 'fGrowth', 'fLastPost',
          'fBloggerGender', 'fBloggerAge', 'fBloggerLanguage', 'fBloggerCountry',
          'fAudienceGender', 'fAudienceAge', 'fAudienceCountry', 'fAudienceLanguage',
          'fKeywords', 'fBio', 'fContactType', 'fSimilarTo'
        ];
        filterIds.forEach(id => {
          const el = document.getElementById(id);
          if (!el) return;
          el.addEventListener('input', applyFilters);
          el.addEventListener('change', applyFilters);
        });

        // –ß–µ–∫–±–æ–∫—Å
        ['fVerifiedOnly'].forEach(id => {
          const el = document.getElementById(id);
          if (el) el.addEventListener('change', applyFilters);
        });

        // –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        document.getElementById('clearFilters')?.addEventListener('click', clearAllFilters);
        document.getElementById('selectAll')?.addEventListener('click', selectAllFiltered);
        document.getElementById('clearPicked')?.addEventListener('click', clearSelectedBloggers);
        document.getElementById('exportResults')?.addEventListener('click', exportToCSV);

        // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
        document.querySelectorAll('.sort-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            appState.currentSort = this.dataset.sort;
            applyFilters();
          });
        });
      }

      function applyFilters() {
        renderBloggersList();
        updateActiveChips();
        updateSelectionCount();
      }

      function clearAllFilters() {
        const inputs = document.querySelectorAll('#filtersForm input, #filtersForm select');
        inputs.forEach(input => {
          if (input.type === 'checkbox') input.checked = false;
          else input.value = '';
        });

        // —Å–±—Ä–æ—Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∫ ¬´—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏¬ª
        document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
        const rel = document.querySelector('.sort-btn[data-sort="relevance"]');
        if (rel) rel.classList.add('active');
        appState.currentSort = 'relevance';

        applyFilters();
      }

      function updateActiveChips() {
        const chipsContainer = document.getElementById('activeChips');
        if (!chipsContainer) return;
        chipsContainer.innerHTML = '';

        const addChip = (text, clearFn) => {
          const chip = document.createElement('div');
          chip.className = 'chip-filter';
          chip.innerHTML = `${text} <button type="button">√ó</button>`;
          chip.querySelector('button').addEventListener('click', clearFn);
          chipsContainer.appendChild(chip);
        };

        const platform = $('#fPlatform')?.value;
        const growth = $('#fGrowth')?.value;
        const bloggerGender = $('#fBloggerGender')?.value;
        const contactType = $('#fContactType')?.value;
        const erMin = $('#fErMin')?.value;
        const erMax = $('#fErMax')?.value;
        const verified = $('#fVerifiedOnly')?.checked;

        if (platform) addChip(`–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${platform}`, () => { $('#fPlatform').value = ''; applyFilters(); });
        if (growth) addChip(`–†–æ—Å—Ç: ${growth}`, () => { $('#fGrowth').value = ''; applyFilters(); });
        if (bloggerGender) addChip(`–ü–æ–ª: ${bloggerGender}`, () => { $('#fBloggerGender').value = ''; applyFilters(); });
        if (contactType) addChip(`–ö–æ–Ω—Ç–∞–∫—Ç: ${contactType}`, () => { $('#fContactType').value = ''; applyFilters(); });
        if (erMin) addChip(`ER –æ—Ç: ${erMin}%`, () => { $('#fErMin').value = ''; applyFilters(); });
        if (erMax) addChip(`ER –¥–æ: ${erMax}%`, () => { $('#fErMax').value = ''; applyFilters(); });
        if (verified) addChip('–¢–æ–ª—å–∫–æ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ', () => { $('#fVerifiedOnly').checked = false; applyFilters(); });
      }

      function renderBloggersList() {
        const listContainer = document.getElementById('resultsList');
        if (!listContainer) return;
        listContainer.innerHTML = '';

        const filters = {
          platform: $('#fPlatform')?.value || '',
          followersMin: parseInt($('#followersMin')?.value) || 0,
          followersMax: parseInt($('#followersMax')?.value) || Infinity,
          followersUnit: $('#fFollowersUnit')?.value || 'k',
          avgViewsMin: parseInt($('#fAvgViewsMin')?.value) || 0,
          erMin: parseFloat($('#fErMin')?.value) || 0,
          erMax: parseFloat($('#fErMax')?.value) || Infinity,
          growth: $('#fGrowth')?.value || '',
          lastPost: $('#fLastPost')?.value || '',
          bloggerGender: $('#fBloggerGender')?.value || '',
          bloggerAge: $('#fBloggerAge')?.value || '',
          bloggerLanguage: $('#fBloggerLanguage')?.value || '',
          bloggerCountry: $('#fBloggerCountry')?.value || '',
          audienceGender: $('#fAudienceGender')?.value || '',
          audienceAge: $('#fAudienceAge')?.value || '',
          audienceCountry: $('#fAudienceCountry')?.value || '',
          audienceLanguage: $('#fAudienceLanguage')?.value || '',
          keywords: ($('#fKeywords')?.value || '').toLowerCase(),
          bio: ($('#fBio')?.value || '').toLowerCase(),
          contactType: $('#fContactType')?.value || '',
          verifiedOnly: $('#fVerifiedOnly')?.checked || false,
          similarTo: $('#fSimilarTo')?.value || ''
        };

        let filtered = appState.mockBloggers.filter(b => {
          if (filters.platform && b.platform !== filters.platform) return false;

          const followersValue = filters.followersUnit === 'm' ? b.followers / 1_000_000 : b.followers / 1_000;
          if (followersValue < filters.followersMin || followersValue > filters.followersMax) return false;

          if (b.avg_views < filters.avgViewsMin) return false;
          if (b.er < filters.erMin || b.er > filters.erMax) return false;

          if (filters.growth && b.growth !== filters.growth) return false;

          if (filters.bloggerGender && b.blogger_gender !== filters.bloggerGender) return false;
          if (filters.bloggerAge && b.blogger_age !== filters.bloggerAge) return false;
          if (filters.bloggerCountry && b.blogger_country !== filters.bloggerCountry) return false;
          if (filters.bloggerLanguage && b.blogger_language !== filters.bloggerLanguage) return false;

          if (filters.audienceGender && b.audience_gender !== filters.audienceGender) return false;
          if (filters.audienceAge && b.audience_age !== filters.audienceAge) return false;
          if (filters.audienceCountry && b.audience_country !== filters.audienceCountry) return false;
          if (filters.audienceLanguage && b.audience_language !== filters.audienceLanguage) return false;

          if (filters.contactType) {
            if (filters.contactType === 'email' && !b.has_email) return false;
            if (filters.contactType === 'phone' && !b.has_phone) return false;
            if (filters.contactType === 'telegram' && !b.has_telegram) return false;
            if (filters.contactType === 'whatsapp' && !b.has_whatsapp) return false;
            if (filters.contactType === 'instagram_dm' && b.platform !== 'Instagram') return false;
          }

          if (filters.verifiedOnly && !b.verified) return false;

          if (filters.keywords && !(
            b.name.toLowerCase().includes(filters.keywords) ||
            (b.bio||'').toLowerCase().includes(filters.keywords)
          )) return false;

          if (filters.bio && !(b.bio||'').toLowerCase().includes(filters.bio)) return false;

          if (filters.lastPost) {
            const days = parseInt(filters.lastPost, 10);
            const d = new Date();
            const cutoff = new Date(d.getFullYear(), d.getMonth(), d.getDate() - days);
            if (new Date(b.last_post) < cutoff) return false;
          }

          return true;
        });

        // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
        switch(appState.currentSort) {
          case 'followers': filtered.sort((a,b)=> b.followers - a.followers); break;
          case 'avg_views': filtered.sort((a,b)=> b.avg_views - a.avg_views); break;
          case 'er':        filtered.sort((a,b)=> b.er - a.er); break;
          case 'relevance':
          default:
            filtered.sort((a,b)=>(b.followers + b.avg_views + b.er*1000) - (a.followers + a.avg_views + a.er*1000));
            break;
        }

        // –°—á—ë—Ç—á–∏–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ)
        const rc1 = document.getElementById('resultsCount'); if (rc1) rc1.textContent = filtered.length;
        const rc2 = document.getElementById('resultsCount2'); if (rc2) rc2.textContent = filtered.length;
        const pc2 = document.getElementById('pickedCount2'); if (pc2) pc2.textContent = appState.selectedBloggers.length;

        // –†–µ–Ω–¥–µ—Ä
        if (!filtered.length) {
          listContainer.innerHTML = '<li class="muted">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã.</li>';
          return;
        }

        filtered.forEach(b => {
          const isSelected = appState.selectedBloggers.some(x => x.id === b.id);
          const li = document.createElement('li');
          li.className = 'card-blogger' + (isSelected ? ' selected' : '');
          li.innerHTML = `
            <div class="avatar">
              ${b.name.charAt(0)}
              <div class="platform-badge">${getPlatformIcon(b.platform)}</div>
            </div>
            <div>
              <div class="name">
                ${b.name}
                ${b.verified ? '<span class="verification-badge"><i class="fas fa-check-circle"></i></span>' : ''}
                <span class="muted">@${b.username}</span>
                <a href="blogger-card.html?id=${b.id}" class="blogger-card-link">
                  <i class="fas fa-external-link-alt"></i> –ö–∞—Ä—Ç–æ—á–∫–∞
                </a>
              </div>
              <div class="meta">
                <span class="badge">${b.platform}</span>
                <span class="badge">${b.blogger_country}</span>
                <span class="badge">ER: ${b.er}%</span>
                ${b.growth === 'growing' ? '<span class="badge highlight"><i class="fas fa-arrow-up"></i> –†–∞—Å—Ç–µ—Ç</span>' : ''}
              </div>
              <div class="stats">
                <div class="stat-item"><i class="fas fa-users"></i> ${formatFollowers(b.followers)}</div>
                <div class="stat-item"><i class="fas fa-eye"></i> ${formatNumber(b.avg_views)}</div>
                <div class="stat-item"><i class="fas fa-chart-line"></i> ${b.er}% ER</div>
              </div>
              <div class="meta">
                –ë–ª–æ–≥–µ—Ä: ${b.blogger_gender === 'male' ? '–ú' : '–ñ'}, ${b.blogger_age} | 
                –ê—É–¥–∏—Ç–æ—Ä–∏—è: ${b.audience_gender === 'male' ? '–ú' : (b.audience_gender==='female'?'–ñ':'–°–º–µ—à.')}, ${b.audience_age}
              </div>
              <div class="meta">
                ${b.bio || ''}
              </div>
              <div class="actions">
                <label class="select-radio">
                  <input type="checkbox" ${isSelected ? 'checked' : ''} onchange="toggleBloggerSelection(${b.id})" />
                  –í –≤—ã–±–æ—Ä–∫—É
                </label>
                <div class="contacts-dropdown">
                  <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;">
                    <i class="fas fa-envelope"></i> –ö–æ–Ω—Ç–∞–∫—Ç—ã
                  </button>
                  <div class="contacts-dropdown-content">
                    ${b.has_email ? '<a href="#"><i class="fas fa-envelope"></i> Email</a>' : ''}
                    ${b.has_phone ? '<a href="#"><i class="fas fa-phone"></i> –¢–µ–ª–µ—Ñ–æ–Ω</a>' : ''}
                    ${b.has_telegram ? '<a href="#"><i class="fab fa-telegram"></i> Telegram</a>' : ''}
                    ${b.has_whatsapp ? '<a href="#"><i class="fab fa-whatsapp"></i> WhatsApp</a>' : ''}
                    ${b.platform === 'Instagram' ? '<a href="#"><i class="fab fa-instagram"></i> Instagram DM</a>' : ''}
                  </div>
                </div>
              </div>
            </div>
          `;
          listContainer.appendChild(li);
        });
      }

      function getPlatformIcon(p) { return ({'YouTube':'‚ñ∂Ô∏è','Instagram':'üì∑','TikTok':'üéµ'})[p] || 'üåê'; }
      function formatFollowers(n){ if(n>=1_000_000) return (n/1_000_000).toFixed(1)+'M'; if(n>=1_000) return (n/1_000).toFixed(1)+'K'; return n; }
      function formatNumber(n){ if(n>=1_000_000) return (n/1_000_000).toFixed(1)+'M'; if(n>=1_000) return (n/1_000).toFixed(1)+'K'; return n; }

      // –ì–ª–æ–±–∞–ª—å–Ω–æ, –∫–∞–∫ –≤ agency.html (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ onchange)
      window.toggleBloggerSelection = function(id){
        const b = appState.mockBloggers.find(x=>x.id===id);
        if (!b) return;
        const i = appState.selectedBloggers.findIndex(x=>x.id===id);
        if (i===-1) appState.selectedBloggers.push(b);
        else appState.selectedBloggers.splice(i,1);
        localStorage.setItem('selectedBloggers', JSON.stringify(appState.selectedBloggers));
        updateSelectionCount();
        renderBloggersList(); // –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É/—á–µ–∫–±–æ–∫—Å—ã
      };

      function updateSelectionCount(){
        const picked = appState.selectedBloggers.length;
        const p1 = document.getElementById('pickedCount'); if (p1) p1.textContent = picked;
        const p2 = document.getElementById('pickedCount2'); if (p2) p2.textContent = picked;
      }

      function selectAllFiltered(){
        const listContainer = document.getElementById('resultsList');
        const ids = Array.from(listContainer.querySelectorAll('.card-blogger input[type="checkbox"]'))
          .map(cb => parseInt(cb.getAttribute('onchange').match(/\d+/)[0],10))
          .filter(Boolean);
        ids.forEach(id=>{
          if (!appState.selectedBloggers.some(x=>x.id===id)) {
            const b = appState.mockBloggers.find(x=>x.id===id);
            if (b) appState.selectedBloggers.push(b);
          }
        });
        localStorage.setItem('selectedBloggers', JSON.stringify(appState.selectedBloggers));
        updateSelectionCount();
        renderBloggersList();
      }

      function clearSelectedBloggers(){
        appState.selectedBloggers = [];
        localStorage.setItem('selectedBloggers', JSON.stringify(appState.selectedBloggers));
        updateSelectionCount();
        renderBloggersList();
      }

      function exportToCSV(){
        const headers = ['–ò–º—è','Username','–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞','–ü–æ–¥–ø–∏—Å—á–∏–∫–∏','–ü—Ä–æ—Å–º–æ—Ç—Ä—ã','ER','–°—Ç—Ä–∞–Ω–∞'];
        const data = appState.selectedBloggers.length ? appState.selectedBloggers : appState.mockBloggers;
        const csv = [
          headers.join(','),
          ...data.map(b=>[
            `"${b.name}"`,
            `"${b.username}"`,
            b.platform,
            b.followers,
            b.avg_views,
            b.er,
            b.blogger_country
          ].join(','))
        ].join('\n');
        const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'bloggers_export.csv';
        a.style.display='none';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
      }
    };
  </script>

  <script defer src="../js/deal-router.js?v=7"></script>
</head>
<body>
  <div data-include="/components/header.html"></div>

  <div class="deal-wrap container">
    <!-- –°–∞–π–¥–±–∞—Ä-–≤–æ—Ä–æ–Ω–∫–∞ -->
    <aside class="deal-sidebar" aria-label="–≠—Ç–∞–ø—ã —Å–¥–µ–ª–∫–∏">
      <nav id="dealNav" class="steps-vertical">
        <a href="#/1-pick"     data-step="1">1. –ü–æ–¥–±–æ—Ä</a>
        <a href="#/2-brief"    data-step="2">2. –ë—Ä–∏—Ñ</a>
        <a href="#/3-email"    data-step="3">3. –ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ—á—Ç—ã</a>
        <a href="#/4-outreach" data-step="4">4. –†–∞—Å—Å—ã–ª–∫–∞</a>
        <a href="#/5-contract" data-step="5">5. –î–æ–≥–æ–≤–æ—Ä</a>
        <a href="#/6-payment"  data-step="6">6. –û–ø–ª–∞—Ç–∞</a>
        <a href="#/7-shoot"    data-step="7">7. –°—ä—ë–º–∫–∞</a>
        <a href="#/8-approval" data-step="8">8. –û–¥–æ–±—Ä–µ–Ω–∏–µ</a>
        <a href="#/9-payout"   data-step="9">9. –í—ã–ø–ª–∞—Ç–∞</a>
      </nav>
    </aside>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="deal-main">
      <!-- –í–µ—Ä—Ö–Ω–∏–µ —Ç–∞–±—ã -->
      <div id="dealTabs" class="deal-tabs">
        <button data-step="1">–ü–æ–¥–±–æ—Ä</button>
        <button data-step="2">–ë—Ä–∏—Ñ</button>
        <button data-step="3">–ü–æ—á—Ç–∞</button>
        <button data-step="4">–†–∞—Å—Å—ã–ª–∫–∞</button>
        <button data-step="5">–î–æ–≥–æ–≤–æ—Ä</button>
        <button data-step="6">–û–ø–ª–∞—Ç–∞</button>
        <button data-step="7">–°—ä—ë–º–∫–∞</button>
        <button data-step="8">–û–¥–æ–±—Ä–µ–Ω–∏–µ</button>
        <button data-step="9">–í—ã–ø–ª–∞—Ç–∞</button>
      </div>

      <!-- –•–æ—Å—Ç –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —à–∞–≥–æ–≤ -->
      <section id="stepHost" class="card" style="padding:16px"></section>

      <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
      <footer class="deal-footer row" style="justify-content:space-between">
        <button id="prevBtn" class="btn btn-secondary" type="button">–ù–∞–∑–∞–¥</button>
        <div class="muted">–≠—Ç–∞–ø <span id="stepNow">1</span> –∏–∑ 9</div>
        <button id="nextBtn" class="btn" type="button">–î–∞–ª–µ–µ</button>
      </footer>
    </main>
  </div>

  <div data-include="/components/footer.html"></div>

  <!-- ================== –®–ê–ë–õ–û–ù–´ –®–ê–ì–û–í ================== -->

  <!-- –®–∞–≥ 1: –ü–æ–¥–±–æ—Ä ‚Äî —Ñ–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ 1:1 —Å agency.html (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤ —Å–∞–º–æ–º –Ω–∏–∑—É) -->
  <template id="tpl-1-pick">
    <h2>–ü–æ–¥–±–æ—Ä –±–ª–æ–≥–µ—Ä–æ–≤</h2>

    <!-- –§–ò–õ–¨–¢–†-–ë–ê–† -->
    <form id="filtersForm" class="filterbar" onsubmit="return false">
      <!-- –ì—Ä—É–ø–ø–∞ 1: –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
      <div class="filter-group">
        <h3 class="filter-group-title"><i class="fas fa-globe"></i> –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>

        <div class="chip">
          <label>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</label>
          <select id="fPlatform">
            <option value="">–í—Å–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</option>
            <option>Instagram</option>
            <option>YouTube</option>
            <option>TikTok</option>
          </select>
        </div>

        <div class="chip">
          <label>–ü–æ–¥–ø–∏—Å—á–∏–∫–∏</label>
          <input id="followersMin" type="number" min="0" step="1" placeholder="–æ—Ç" style="width:80px" />
          <span class="muted">‚Äî</span>
          <input id="followersMax" type="number" min="0" step="1" placeholder="–¥–æ" style="width:80px" />
          <select id="fFollowersUnit" style="width: 60px;">
            <option value="k">—Ç—ã—Å.</option>
            <option value="m">–º–ª–Ω</option>
          </select>
        </div>

        <div class="chip">
          <label>–°—Ä. –ø—Ä–æ—Å–º–æ—Ç—Ä—ã</label>
          <input id="fAvgViewsMin" type="number" placeholder="–æ—Ç" min="0" step="1000" style="width:90px" />
        </div>

        <div class="chip">
          <label>ER, %</label>
          <input id="fErMin" type="number" placeholder="–æ—Ç" min="0" max="100" step="0.1" style="width:80px" />
          <span class="muted">‚Äî</span>
          <input id="fErMax" type="number" placeholder="–¥–æ" min="0" max="100" step="0.1" style="width:80px" />
        </div>

        <div class="chip">
          <label>–†–æ—Å—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</label>
          <select id="fGrowth">
            <option value="">–õ—é–±–æ–π</option>
            <option value="growing">–†–∞—Å—Ç—É—â–∏–π</option>
            <option value="stable">–°—Ç–∞–±–∏–ª—å–Ω—ã–π</option>
            <option value="declining">–ü–∞–¥–∞—é—â–∏–π</option>
          </select>
        </div>

        <div class="chip">
          <label>–ü–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ—Å—Ç</label>
          <select id="fLastPost">
            <option value="">–ù–µ –≤–∞–∂–Ω–æ</option>
            <option value="1">–ó–∞ —Å—É—Ç–∫–∏</option>
            <option value="7">–ó–∞ –Ω–µ–¥–µ–ª—é</option>
            <option value="30">–ó–∞ –º–µ—Å—è—Ü</option>
          </select>
        </div>
      </div>

      <!-- –ì—Ä—É–ø–ø–∞ 2: –ë–ª–æ–≥–µ—Ä -->
      <div class="filter-group">
        <h3 class="filter-group-title"><i class="fas fa-user"></i> –ë–ª–æ–≥–µ—Ä</h3>

        <div class="chip">
          <label>–ü–æ–ª –±–ª–æ–≥–µ—Ä–∞</label>
          <select id="fBloggerGender">
            <option value="">–õ—é–±–æ–π</option>
            <option value="male">–ú—É–∂—Å–∫–æ–π</option>
            <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
          </select>
        </div>

        <div class="chip">
          <label>–í–æ–∑—Ä–∞—Å—Ç –±–ª–æ–≥–µ—Ä–∞</label>
          <select id="fBloggerAge">
            <option value="">–õ—é–±–æ–π</option>
            <option value="13-17">13-17</option>
            <option value="18-24">18-24</option>
            <option value="25-34">25-34</option>
            <option value="35-44">35-44</option>
            <option value="45+">45+</option>
          </select>
        </div>

        <div class="chip">
          <label>–Ø–∑—ã–∫ –±–ª–æ–≥–µ—Ä–∞</label>
          <select id="fBloggerLanguage">
            <option value="">–õ—é–±–æ–π</option>
            <option>–†—É—Å—Å–∫–∏–π</option>
            <option>–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
            <option>–ò—Å–ø–∞–Ω—Å–∫–∏–π</option>
          </select>
        </div>

        <div class="chip">
          <label>–°—Ç—Ä–∞–Ω–∞ –±–ª–æ–≥–µ—Ä–∞</label>
          <select id="fBloggerCountry">
            <option value="">–õ—é–±–∞—è</option>
            <option>–†–æ—Å—Å–∏—è</option>
            <option>–°–®–ê</option>
            <option>–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è</option>
            <option>–ì–µ—Ä–º–∞–Ω–∏—è</option>
            <option>–§—Ä–∞–Ω—Ü–∏—è</option>
            <option>–ò—Å–ø–∞–Ω–∏—è</option>
            <option>–¢—É—Ä—Ü–∏—è</option>
            <option>–û–ê–≠</option>
          </select>
        </div>
      </div>

      <!-- –ì—Ä—É–ø–ø–∞ 3: –ê—É–¥–∏—Ç–æ—Ä–∏—è -->
      <div class="filter-group">
        <h3 class="filter-group-title"><i class="fas fa-users"></i> –ê—É–¥–∏—Ç–æ—Ä–∏—è</h3>

        <div class="chip">
          <label>–ü–æ–ª –∞—É–¥–∏—Ç–æ—Ä–∏–∏</label>
          <select id="fAudienceGender">
            <option value="">–õ—é–±–æ–π</option>
            <option value="male">–ú—É–∂—Å–∫–æ–π</option>
            <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
            <option value="mixed">–°–º–µ—à–∞–Ω–Ω—ã–π</option>
          </select>
        </div>

        <div class="chip">
          <label>–í–æ–∑—Ä–∞—Å—Ç –∞—É–¥–∏—Ç–æ—Ä–∏–∏</label>
          <select id="fAudienceAge">
            <option value="">–õ—é–±–æ–π</option>
            <option value="13-17">13-17</option>
            <option value="18-24">18-24</option>
            <option value="25-34">25-34</option>
            <option value="35-44">35-44</option>
            <option value="45+">45+</option>
          </select>
        </div>

        <div class="chip">
          <label>–°—Ç—Ä–∞–Ω–∞ –∞—É–¥–∏—Ç–æ—Ä–∏–∏</label>
          <select id="fAudienceCountry">
            <option value="">–õ—é–±–∞—è</option>
            <option>–†–æ—Å—Å–∏—è</option>
            <option>–°–®–ê</option>
            <option>–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è</option>
            <option>–ì–µ—Ä–º–∞–Ω–∏—è</option>
          </select>
        </div>

        <div class="chip">
          <label>–Ø–∑—ã–∫ –∞—É–¥–∏—Ç–æ—Ä–∏–∏</label>
          <select id="fAudienceLanguage">
            <option value="">–õ—é–±–æ–π</option>
            <option>–†—É—Å—Å–∫–∏–π</option>
            <option>–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
          </select>
        </div>
      </div>

      <!-- –ì—Ä—É–ø–ø–∞ 4: –ö–æ–Ω—Ç–µ–Ω—Ç –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã -->
      <div class="filter-group">
        <h3 class="filter-group-title"><i class="fas fa-hashtag"></i> –ö–æ–Ω—Ç–µ–Ω—Ç –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã</h3>

        <div class="chip">
          <label>–ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º</label>
          <input id="fKeywords" type="search" placeholder="—Ç–µ–º—ã, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞..." style="width:180px" />
        </div>

        <div class="chip">
          <label>–ü–æ–∏—Å–∫ –ø–æ bio</label>
          <input id="fBio" type="search" placeholder="—Å–ª–æ–≤–∞ –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è..." style="width:150px" />
        </div>

        <div class="chip">
          <label>–ï—Å—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç</label>
          <select id="fContactType">
            <option value="">–õ—é–±–æ–π –∫–æ–Ω—Ç–∞–∫—Ç</option>
            <option value="email">Email</option>
            <option value="phone">–¢–µ–ª–µ—Ñ–æ–Ω</option>
            <option value="telegram">Telegram</option>
            <option value="whatsapp">WhatsApp</option>
            <option value="instagram_dm">Instagram DM</option>
          </select>
        </div>

        <div class="chip" style="gap:10px;">
          <label>
            <input type="checkbox" id="fVerifiedOnly" />
            <span>–¢–æ–ª—å–∫–æ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ</span>
          </label>
        </div>
      </div>

      <!-- –ì—Ä—É–ø–ø–∞ 5: –ü–æ—Ö–æ–∂–∏–µ –±–ª–æ–≥–µ—Ä—ã -->
      <div class="filter-group">
        <h3 class="filter-group-title"><i class="fas fa-compress-alt"></i> –ü–æ—Ö–æ–∂–∏–µ –±–ª–æ–≥–µ—Ä—ã</h3>

        <div class="chip">
          <label>–ü–æ—Ö–æ–∂–∏–µ –Ω–∞</label>
          <select id="fSimilarTo">
            <option value="">–ù–µ –≤—ã–±—Ä–∞–Ω–æ</option>
            <option value="influencer1">@popular_blogger</option>
            <option value="influencer2">@top_creator</option>
            <option value="influencer3">@famous_influencer</option>
          </select>
        </div>
      </div>

      <!-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ ‚Äî —Å—Ç—Ä–æ–≥–æ –ø–æ–¥ ¬´–ü–æ—Ö–æ–∂–∏–µ –±–ª–æ–≥–µ—Ä—ã¬ª, –∫–∞–∫ –≤ agency.html -->
      <div class="sort-options">
        <span class="sort-label">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</span>
        <div class="sort-buttons">
          <button class="sort-btn" data-sort="followers">–ü–æ–¥–ø–∏—Å—á–∏–∫–∏</button>
          <button class="sort-btn" data-sort="avg_views">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã</button>
          <button class="sort-btn" data-sort="er">ER</button>
          <button class="sort-btn active" data-sort="relevance">–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å</button>
        </div>

        <button id="clearFilters" class="btn btn-secondary" type="button" style="margin-left:auto">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</button>
      </div>
    </form>

    <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã -->
    <div id="activeChips" class="chips"></div>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ -->
    <div class="row" style="justify-content:space-between;margin:20px 0;align-items:center">
      <div class="muted">–ù–∞–π–¥–µ–Ω–æ: <span id="resultsCount2">0</span> ¬∑ –í—ã–±—Ä–∞–Ω–æ: <span id="pickedCount2">0</span></div>
      <div class="row">
        <button id="selectAll" class="btn btn-secondary" type="button">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
        <button id="clearPicked" class="btn btn-secondary" type="button">–°–±—Ä–æ—Å–∏—Ç—å –≤—ã–±–æ—Ä</button>
        <button id="exportResults" class="btn" type="button"><i class="fas fa-download"></i> –≠–∫—Å–ø–æ—Ä—Ç</button>
      </div>
    </div>

    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
    <ul id="resultsList" class="cards-list"></ul>
  </template>

  <!-- –®–∞–≥ 2: –ë—Ä–∏—Ñ —Å AI-–º–æ–¥—É–ª–µ–º -->
  <template id="tpl-2-brief">
    <h2>–ë—Ä–∏—Ñ</h2>

    <form id="briefForm" class="grid">
      <div class="field" style="grid-column:1/-1">
        <label>–¶–µ–ª—å –∫–∞–º–ø–∞–Ω–∏–∏ *</label>
        <textarea id="briefGoal" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ —Ü–µ–ª–∏, —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é, –∫–ª—é—á–µ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è..." required></textarea>
      </div>

      <div class="field">
        <label>–ë—é–¥–∂–µ—Ç (‚ÇΩ) *</label>
        <input id="briefBudget" type="number" min="1" placeholder="10000" required />
      </div>

      <div class="field">
        <label>–î–µ–¥–ª–∞–π–Ω *</label>
        <input id="briefDeadline" type="date" required />
      </div>

      <div class="field">
        <label>–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è</label>
        <input id="briefAudience" type="text" placeholder="–í–æ–∑—Ä–∞—Å—Ç, –∏–Ω—Ç–µ—Ä–µ—Å—ã, –≥–µ–æ" />
      </div>

      <div class="field">
        <label>–ü—Ä–æ–¥—É–∫—Ç/—É—Å–ª—É–≥–∞</label>
        <input id="briefProduct" type="text" placeholder="–ß—Ç–æ –ø—Ä–æ–¥–≤–∏–≥–∞–µ–º" />
      </div>

      <div class="field">
        <label>KPI/–º–µ—Ç—Ä–∏–∫–∏</label>
        <input id="briefKPI" type="text" placeholder="CPA, ROAS, –∫–æ–Ω–≤–µ—Ä—Å–∏–∏" />
      </div>

      <div class="field">
        <label>–¢–æ–Ω –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏</label>
        <input id="briefTone" type="text" placeholder="–§–æ—Ä–º–∞–ª—å–Ω—ã–π, –¥—Ä—É–∂–µ—Å–∫–∏–π, —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π" />
      </div>

      <div class="field">
        <label>–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã</label>
        <input id="briefPlatforms" type="text" placeholder="Instagram, YouTube, TikTok" />
      </div>

      <div style="grid-column: 1/-1; display: flex; gap: 12px; align-items: center; margin-top: 16px;">
        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±—Ä–∏—Ñ</button>
        <span id="briefSaved" class="muted"></span>
        
        <div style="margin-left: auto; display: flex; gap: 8px; align-items: center;">
          <span class="muted">AI-–ø–æ–º–æ—â–Ω–∏–∫:</span>
          <button type="button" id="aiAnalyzeBtn" class="btn btn-secondary">–ê–Ω–∞–ª–∏–∑ –±—Ä–∏—Ñ–∞</button>
          <button type="button" id="aiApplyBtn" class="btn btn-secondary" disabled>–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–¥–µ–∏</button>
        </div>
      </div>
    </form>

    <div id="aiBriefPanel" class="ai-panel">
      <div class="muted">–ù–∞–∂–º–∏—Ç–µ ¬´–ê–Ω–∞–ª–∏–∑ –±—Ä–∏—Ñ–∞¬ª –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π</div>
    </div>
  </template>

  <!-- –®–∞–≥ 3: –ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ—á—Ç—ã -->
  <template id="tpl-3-email">
    <h2>–ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ—á—Ç—ã</h2>
    <div class="row">
      <input id="emailAccount" type="email" placeholder="[email protected]" style="max-width:320px" />
      <button id="linkEmailBtn" class="btn">–ü—Ä–∏–≤—è–∑–∞—Ç—å</button>
      <span id="emailStatus" class="muted"></span>
    </div>
  </template>

  <!-- –®–∞–≥ 4: –†–∞—Å—Å—ã–ª–∫–∞ -->
  <template id="tpl-4-outreach">
    <h2>–†–∞—Å—Å—ã–ª–∫–∞</h2>
    <p class="muted">–í—ã–±—Ä–∞–Ω–Ω—ã–µ –Ω–∞ —à–∞–≥–µ 1 –±–ª–æ–≥–µ—Ä—ã –±—É–¥—É—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω—ã –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º–∏.</p>
    <div class="row">
      <button id="sendOutreachBtn" class="btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–∞</button>
      <span id="outreachStatus" class="muted"></span>
    </div>
    <h3 style="margin-top:16px">–ö—Ç–æ –æ—Ç–≤–µ—Ç–∏–ª?</h3>
    <ul id="outreachList" class="list"></ul>
    <button id="markRespondBtn" class="btn btn-secondary">–û—Ç–º–µ—Ç–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
  </template>

  <!-- –®–∞–≥ 5: –î–æ–≥–æ–≤–æ—Ä -->
  <template id="tpl-5-contract">
    <h2>–î–æ–≥–æ–≤–æ—Ä</h2>
    <div class="row">
      <button id="signContractBtn" class="btn">–ü–æ–¥–ø–∏—Å–∞—Ç—å</button>
      <span id="contractStatus" class="muted"></span>
    </div>
  </template>

  <!-- –®–∞–≥ 6: –û–ø–ª–∞—Ç–∞ -->
  <template id="tpl-6-payment">
    <h2>–û–ø–ª–∞—Ç–∞</h2>
    <div class="row">
      <button id="reserveFundsBtn" class="btn">–ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞</button>
      <span id="paymentStatus" class="muted"></span>
    </div>
  </template>

  <!-- –®–∞–≥ 7: –°—ä—ë–º–∫–∞ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ -->
  <template id="tpl-7-shoot">
    <h2>–°—ä—ë–º–∫–∞ —á–µ—Ä–Ω–æ–≤–∏–∫–∞</h2>
    <div class="row">
      <button id="uploadBtn" class="btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ</button>
      <input id="uploadInput" type="file" accept="video/*" hidden />
      <span id="shootStatus" class="muted"></span>
    </div>
  </template>

  <!-- –®–∞–≥ 8: –û–¥–æ–±—Ä–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º—ã -->
  <template id="tpl-8-approval">
    <h2>–û–¥–æ–±—Ä–µ–Ω–∏–µ</h2>
    <div class="field">
      <label>–°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–æ–ª–∏–∫</label>
      <input id="approvalLink" type="url" placeholder="https://"/>
    </div>
    <div class="field">
      <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
      <textarea id="approvalComment" rows="2" placeholder="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"></textarea>
    </div>
    <div class="row">
      <button id="approveBtn" class="btn">–ü—Ä–∏–Ω—è—Ç—å</button>
      <button id="requestFixBtn" class="btn btn-secondary">–ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø—Ä–∞–≤–∫–∏</button>
      <span id="approvalStatus" class="muted"></span>
    </div>
  </template>

  <!-- –®–∞–≥ 9: –í—ã–ø–ª–∞—Ç–∞ –±–ª–æ–≥–µ—Ä—É -->
  <template id="tpl-9-payout">
    <h2>–í—ã–ø–ª–∞—Ç–∞ –±–ª–æ–≥–µ—Ä—É</h2>
    <div id="payoutInfo" class="muted">–ë—É–¥–µ—Ç –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ ¬´–ü—Ä–∏–Ω—è—Ç—å¬ª.</div>
  </template>
</body>
</html>
